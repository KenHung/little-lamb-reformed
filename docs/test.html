---
layout: default
---

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% elsif page.header.video.id and page.header.video.provider %}
  {% include page__hero_video.html %}
{% endif %}

{% if page.url != "/" and site.breadcrumbs %}
  {% unless paginator %}
    {% include breadcrumbs.html %}
  {% endunless %}
{% endif %}

<div id="main" role="main">
  <div class="sidebar sticky">
    <nav class="nav__list">
      {% if page.sidebar.title %}<h3 class="nav__title" style="padding-left: 0;">{{ page.sidebar.title }}</h3>{% endif %}
      <input id="ac-toc" name="accordion-toc" type="checkbox" />
      <label for="ac-toc">{{ site.data.ui-text[site.locale].menu_label | default: "Toggle Menu" }}</label>
      <ul class="nav__items">
        {% assign categories_max = 0 %}
        {% for category in site.categories %}
          {% if category[1].size > categories_max %}
            {% assign categories_max = category[1].size %}
          {% endif %}
        {% endfor %}

        {% assign other = site.posts | map: "category" | uniq %}
        {% for group in site.category_groups %}
          {% for category in group.categories %}
            {% assign other = other | remove: category %}
          {% endfor %}
        {% endfor %}
        {% for group in site.category_groups %}
          <li>
            <span class="nav__sub-title">{{ group.title }}</span>        
            <ul>
              {% assign show_categories = group.categories | default: other %}
              {% for i in (1..categories_max) reversed %}
                {% for category in site.categories %}
                  {% if category[1].size == i and show_categories contains category[0] %}
                    <li>
                      <a href="#{{ category[0] | slugify }}">
                        {{ category[0] }} <span class="taxonomy__count">({{ i }})</span>
                      </a>
                    </li>
                  {% endif %}
                {% endfor %}
              {% endfor %}
            </ul>
          </li>
        {% endfor %}
      </ul>
    </nav>
  </div>

  <div class="archive">
    <section class="taxonomy__section">
      <div style="display: flex; align-items: baseline">
        <h1 class="archive__subtitle"><a href="#all">全部文章</a><span id="selected-catagory"></span></h1>
        <div style="flex: 1">
        </div>
        <button class="list-display-toggle" type="button" onclick="showDetails()">
          <span class="visually-hidden">文章預覽</span>
          <i class="fas fa-newspaper"></i>
        </button>
        <button class="list-display-toggle" type="button" onclick="hideDetails()">
          <span class="visually-hidden">清單</span>
          <i class="fas fa-list"></i>
        </button>
      </div>
      <input type="search" placeholder="快速搜尋...">
      <div id="detailed-list" class="entries-list">
        {% for post in site.posts %}
          <div class="{{ include.type | default: 'list' }}__item" data-category="{{ post.categories[0] }}">
            <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
              <h2 class="archive__item-title no_toc" itemprop="headline">
                {% if post.link %}
                  <a href="{{ post.link }}" class="listjs-title">{{ post.title }}</a> <a href="{{ post.url | relative_url }}" rel="permalink"><i class="fas fa-link" aria-hidden="true" title="permalink"></i><span class="sr-only">Permalink</span></a>
                {% else %}
                  <a href="{{ post.url | relative_url }}" rel="permalink" class="listjs-title">{{ post.title }}</a>
                {% endif %}
              </h2>
              {% include page__meta.html type=include.type %}
              {% if post.excerpt %}<p class="archive__item-excerpt" itemprop="description">{{ post.excerpt | markdownify | strip_html | truncate: 160 }}</p>{% endif %}
            </article>
          </div>
        {% endfor %}
      </div>
      <div id="simple-list">
        <ul class="list">
          {% for post in site.posts %}
            <li data-category="{{ post.categories[0] }}">
              <a href="{{ post.url | relative_url }}" rel="permalink" class="listjs-title">{{ post.title }}</a>
            </li>
          {% endfor %}
        </ul>
      </div>
      <a href="#" class="back-to-top">{{ site.data.ui-text[site.locale].back_to_top | default: 'Back to Top' }} &uarr;</a>
    </section>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/list.js@2.3.1/dist/list.min.js" integrity="sha256-NEVvGNMGqFvs6adGLZjm5sLgcuX9rGTg1wlGtA1f7M8=" crossorigin="anonymous"></script>
<script src="/assets/js/article_list.js"></script>
