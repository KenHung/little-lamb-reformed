<script src="https://unpkg.com/vue@3"></script>
<script>
  var PixnetComments = {
    data() {
      return {
        comments: []
      }
    },
    methods: {
      get(article_id) {
        var vm = this;
        var xhr = new XMLHttpRequest();
        var url = 'https://emma.pixnet.cc/blog/articles/' + article_id + '/comments?user=mickey1124';
        xhr.open('GET', url);
        xhr.onload = function () {
          if (xhr.status === 200) {
            var resp = JSON.parse(xhr.responseText);
            print(resp.message);
            vm.comments = resp.comments;
          }
        }
        xhr.send();
      }
    }
  };
  var vm = Vue.createApp(PixnetComments).mount('#pixnet-comments');
  vm.get('{{ page.id }}'.split('/').pop());
</script>